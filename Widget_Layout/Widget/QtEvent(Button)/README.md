# Qt에서의 이벤트 처리

GUI 프로그램은 마우스 클릭이나 키보드 입력 등의 이벤트(Event)를 처리하거, 해당 결과를 사용자에게 다시 보여주는 작업(Feedback)을 수행한다.
**Qt**에서도 이러한 이벤트를 처리하기 위한 방법을 제공하는데, 다른 툴킷과는 다른 방법을 사용한다.

**Qt**는 이벤트를 처리하기 위해 **시그널(Signal)**과 **슬롯(Slot)**이라는 구조를 사용한다. 버튼 클릭 이벤트에 대항하여 **반응(Response)**이 이루어지도록 하려면 먼저 각 객체들의 시그널과 슬롯을 연결해야 한다.

대부분의 **Qt** 클래스들은 **QObject** 클래스를 상속받는데, **QWidget** 클래스도 마찬가지로 **QObject** 클래스를 직접 상속받는다. **QObject** 클래슨는 **Qt**의 객체들이 가지고 있어야 할 속성들을 지정해 놓은 클래스로 이벤트 처리와 관련된 속성들도 가지고 있다.

**QObject** 클래스는 시그널과 슬롯을 연결할 수 있도록 **connect()**라는 **static** 메소드를 제공한다
```cpp
QMetaObject::Connection QObject::connect(const QObject *sender, const char *signal, const QObject *receiver, consr char *method, Qt::ConnectionType type = Qt::AutoConnection);
```
+ **connect()** 함수의 대표 인자

| 인자 | 내용
|:---:|:---:|
| sender | 시그널을 발생시킬 객체의 포인터를 지정한다.|
| signal | 첫 번째 매개변수로 지정된 객체(sender)가 발생시키는 시그널을 지정한다.
| receiver | 시그널을 받을 객체의 포인터를 지정한다.
| method | 세 번째 매개변수에 지정된 객체(receiver)에 정의된 슬롯을 지정한다.

**connect()** 함수는 5개의 인자를 제공하지만 일반적으로 3~4개의 인자를 많이 사용한다. 첫 번째 인자는 시그널을 발생시킬 객체의 포인터형이고, 두 번째 인자는 첫 번째 인자가 발생시킬 시그널이다. **QPushButton** 클래스의 도움말을 찾아보면 4개의 시그널을 **QAbstractButton** 클래스로부터 상속을 받고 있는 것을 알 수 있다.

버튼을 누르거나(pressed()), 떼거나(released()), 클릭하거나(clicked()), 혹은 버튼의 상태 변환(toggled())에 대한 시그널들이 각각 제공되는데, 여기에서 원하는 시그널을 두 번째 인자로 사용하면 된다. 또한 시그널을 사용할 때에는 **SIGNAL()**이라는 매크로를 이용해서 묶어주어야 한다.

**connect()** 메소드의 세 번째 인자는 시그널이 발생했을 때 이 시그널을 처리할 객체의 포인터형이 들어가고, 네 번째 인자로는 그 객체의 슬롯을 사용하면 된다. 일반적으로 세 번째 인자가 this(현재 클래스)인 경우에는 생략이 가능하다.

슬롯은 모티프나 GTK+의 콜백 함수(Callback)와 같이 이벤트를 처리하기 위한 함수로 일반적인 메소드와 비슷하지만 별도의 선언과 처리 과정이 필요하다. 네 번째 인자로 슬롯을 사용하기 위해서는 시그널과 마찬가지로 **SLOT()** 매크로를 이용해야 한다.

**button.cpp** 코드를 빌드해서 실행해보면 버튼을 클릭하면 애플리케이션이 종료되고 애플리케이션의 창을 마우스로 드래그하면 윈도우의 크기를 변경할 수 있으며 버튼의 크기도 함께 변경된다.

시그널과 슬롯을 연결할 때 **QObject** 클래스에서 **connect()** 메소드를 제공했던 것과 같이, 연결된 슬롯과 시그널의 분리를 위해 **QObject::disconnect()**메소드를 제공한다.

+ ***실행 결과***<br>
![button](https://github.com/user-attachments/assets/9bf1ceee-e0d1-4293-8c9a-d6d142d15c90)
